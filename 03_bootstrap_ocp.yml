- name: Setup ocp configuration
  hosts: localhost
  connection: local
  become: false
  gather_facts: false

  tasks:
    - name: Ensure cluster is set
      ansible.builtin.set_fact:
        cluster: "{{ cluster | default('ocp_local') }}"

    - name: Ensure init cluster is set
      ansible.builtin.set_fact:
        init_cluster: "{{ init_cluster | default(false) }}"

    - name: Include cluster vars
      ansible.builtin.group_by:
        key: "{{ cluster }}"

    - name: Bootsrap the cluster
      ansible.builtin.include_role:
        name: ocp_bootstrap

# - name: Wipe and reboot the nodes
#   ansible.builtin.include_role:
#     name: lab
#     tasks_from: wipe_reboot.yml
#   when: init_cluster | default(false) | bool
